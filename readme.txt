#make_depth_maxall.py

洪水浸水想定区域のシェープファイルから、最大包絡値となるシェープファイルを作成するためのスクリプトです。
Python3.9　及び　Python3.11で動作確認済みです。
外部ライブラリとしてPandas　と　Geopandas が必要です。

以下手順です。
./shpに、最大包絡を作成したいシェープファイルを配置します。
その際、浸水深はフィールド「value」に1～6の値で格納しておいてください。
また、群馬県水害リスク想定マップ（山地）等の優先順位の低いシェープファイルは、./shp/ex内に配置してください。
以上です。

実行すると、
./splitには、./shpに配置したシェープファイルの浸水深ランク（value）毎に分割されたシェープファイルが保存されます。
./rankには、./splitのシェープファイルを同じ浸水深ランク（value）毎に結合したシェープファイルが保存されます。
上記２ファイル内のシェープファイルは、スクリプトの処理が正しく行われているか心配なときに確認してください。

./materialには、スクリプトの実行に必要なファイルが保存されていますので触らないでください。

2023年4月27日追記

浸水深のフィールドとして「rank」も対応しました。
また、浸水深以外（例えば浸水継続時間）にも対応できるようにフィールドの値は1～7までとしました。

2023年5月10日追記

一部処理の並列化と、途中ファイルを.gpkg形式とすることにより高速化を図りました。
また、空のダミーランクファイルが不要となるように修正しました。
